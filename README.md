Тест полностью рабочий, проверил и отладил :)